generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// 用户表
model User {
  id        String     @id @default(uuid())
  email     String     @unique
  createdAt DateTime   @default(now())
  projects  Project[]
}

// 项目表
model Project {
  id            String   @id @default(uuid())
  userId        String
  user          User     @relation(fields: [userId], references: [id])
  originalImage String   // 原始图片路径
  resultImage   String?  // 生成的图片路径
  parameters    Json     // 存储生成参数
  status       String   // processing, completed, failed
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

// 生成参数表
model GenerationParams {
  id             String   @id @default(uuid())
  projectId      String
  denoisingSteps Int
  guidanceRate   Float
  artStyle       String
  features       Json     // 存储特征修改
  createdAt      DateTime @default(now())
}